# タスク 5-2: コレクション連続閲覧

## 目的・ゴール

コレクション内の画像を順番に閲覧できる「連続閲覧モード」を実装する。シリーズものの画像をスムーズに読み進められるようにする。

## 提供価値

- コレクション内の画像を順番に閲覧できる
- 前後の画像へ簡単に移動できる
- キーボードショートカットで快適にナビゲーションできる
- 現在位置（何枚目/全何枚）が分かる

## 実装方針

### 機能要件

1. **コレクション閲覧ビュー**
   - 画像を大きく表示
   - 前/次の画像へのナビゲーションボタン
   - 現在位置インジケーター（例: 3/10）
   - コレクション詳細ページへの戻るリンク

2. **キーボードナビゲーション**
   - 左矢印キー: 前の画像
   - 右矢印キー: 次の画像
   - Escape: 閲覧終了

3. **URL 設計**
   - `/collections/:collectionId/view` - 先頭から閲覧開始
   - `/collections/:collectionId/view/:imageId` - 指定画像から閲覧開始

### バックエンド

既存の `GET /api/collections/:id` で画像一覧が取得できるため、追加 API は不要。

### フロントエンド

1. **CollectionViewerPage** コンポーネント
   - 画像表示
   - ナビゲーション UI
   - キーボードイベントハンドリング

2. **コレクション詳細ページからの導線**
   - 「連続閲覧」ボタンを追加
   - 画像クリックでその画像から閲覧開始

## 完了条件

- [x] コレクション内の画像を順番に閲覧できる
- [x] 前後へのナビゲーションボタンがある
- [x] キーボードショートカットで操作できる
- [x] 現在位置が表示される
- [x] コレクション詳細ページから閲覧を開始できる

## 作業ログ

### 2026-01-17

- CollectionViewerPage コンポーネントを実装
  - フルスクリーン画像表示
  - 前後ナビゲーションボタン（左右端に配置）
  - キーボードナビゲーション（矢印キー、Escape）
  - 現在位置インジケーター（x / y 形式）
  - コレクション名と戻るボタン
- ルート追加
  - `/collections/:id/view` - 先頭から閲覧
  - `/collections/:id/view/:imageId` - 指定画像から閲覧
- CollectionDetailPage に導線追加
  - 「View」ボタンで連続閲覧開始
  - サムネイルクリックでその画像から閲覧開始
